<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Migration Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .test-header {
            background: #007bff;
            color: white;
            padding: 20px;
        }
        
        .test-header h1 {
            margin: 0;
            font-size: 24px;
        }
        
        .test-header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        
        .test-content {
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        
        .test-section h2 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 18px;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background: #0056b3;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #545b62;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .component-container {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            min-height: 200px;
        }
        
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }
        
        .original-component {
            border-left: 4px solid #dc3545;
        }
        
        .migrated-component {
            border-left: 4px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ Component Migration Test</h1>
            <p>Testing the migration from old HTMLElement pattern to ComponentBase standardized interface</p>
        </div>
        
        <div class="test-content">
            <!-- App Manager Status -->
            <div class="test-section">
                <h2>üèóÔ∏è App Manager Status</h2>
                <div id="app-manager-status" class="status status-info">
                    Initializing app manager...
                </div>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="checkAppManager()">Check App Manager</button>
                    <button class="btn btn-secondary" onclick="listComponents()">List Components</button>
                </div>
                <div id="app-manager-log" class="log"></div>
            </div>

            <!-- Example Component Test -->
            <div class="test-section">
                <h2>üìù Example ComponentBase Test</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="createExampleComponent()">Create Example Component</button>
                    <button class="btn btn-success" onclick="testExampleComponent()">Test Component Methods</button>
                    <button class="btn btn-warning" onclick="validateExampleComponent()">Validate Component</button>
                    <button class="btn btn-secondary" onclick="removeExampleComponent()">Remove Component</button>
                </div>
                <div class="component-container" id="example-component-container">
                    <p style="color: #666; text-align: center;">Click "Create Example Component" to test ComponentBase</p>
                </div>
            </div>

            <!-- Settings Manager Comparison -->
            <div class="test-section">
                <h2>‚öñÔ∏è Settings Manager Comparison</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="createOriginalSettings()">Create Original Settings</button>
                    <button class="btn btn-success" onclick="createMigratedSettings()">Create Migrated Settings</button>
                    <button class="btn btn-warning" onclick="compareComponents()">Compare Components</button>
                    <button class="btn btn-secondary" onclick="clearSettingsTest()">Clear Test</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h3>Original Settings Manager</h3>
                        <div class="component-container original-component" id="original-settings-container">
                            <p style="color: #666; text-align: center;">Original component will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated Settings Manager</h3>
                        <div class="component-container migrated-component" id="migrated-settings-container">
                            <p style="color: #666; text-align: center;">Migrated component will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- Global Store Comparison -->
            <div class="test-section">
                <h2>üè¨ Global Store Comparison</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="createOriginalGlobalStore()">Create Original Store</button>
                    <button class="btn btn-success" onclick="createMigratedGlobalStore()">Create Migrated Store</button>
                    <button class="btn btn-warning" onclick="compareGlobalStores()">Compare Stores</button>
                    <button class="btn btn-secondary" onclick="clearGlobalStoreTest()">Clear Test</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h3>Original Global Store</h3>
                        <div class="component-container original-component" id="original-store-container">
                            <p style="color: #666; text-align: center;">Original global store will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated Global Store</h3>
                        <div class="component-container migrated-component" id="migrated-store-container">
                            <p style="color: #666; text-align: center;">Migrated global store will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="store-comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- Resume Viewer Comparison -->
            <div class="test-section">
                <h2>üìÑ Resume Viewer Comparison</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="createOriginalResumeViewer()">Create Original Viewer</button>
                    <button class="btn btn-success" onclick="createMigratedResumeViewer()">Create Migrated Viewer</button>
                    <button class="btn btn-warning" onclick="compareResumeViewers()">Compare Viewers</button>
                    <button class="btn btn-secondary" onclick="clearResumeViewerTest()">Clear Test</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h3>Original Resume Viewer</h3>
                        <div class="component-container original-component" id="original-viewer-container">
                            <p style="color: #666; text-align: center;">Original resume viewer will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated Resume Viewer</h3>
                        <div class="component-container migrated-component" id="migrated-viewer-container">
                            <p style="color: #666; text-align: center;">Migrated resume viewer will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="viewer-comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- API Settings Comparison -->
            <div class="test-section">
                <h2>üîë API Settings Comparison</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="createOriginalApiSettings()">Create Original API Settings</button>
                    <button class="btn btn-success" onclick="createMigratedApiSettings()">Create Migrated API Settings</button>
                    <button class="btn btn-warning" onclick="compareApiSettings()">Compare API Settings</button>
                    <button class="btn btn-secondary" onclick="clearApiSettingsTest()">Clear Test</button>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h3>Original API Settings</h3>
                        <div class="component-container original-component" id="original-api-container">
                            <p style="color: #666; text-align: center;">Original API settings will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated API Settings</h3>
                        <div class="component-container migrated-component" id="migrated-api-container">
                            <p style="color: #666; text-align: center;">Migrated API settings will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="api-comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- AI Assistant Worker Test -->
            <div class="test-section">
                <h2>ü§ñ AI Assistant Worker Migration Test</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="testAiAssistantMigration()">Test AI Assistant Migration</button>
                    <button class="btn btn-secondary" onclick="compareAiAssistantComponents()">Compare Components</button>
                    <button class="btn btn-success" onclick="createAiAssistantComponents()">Create Components</button>
                    <button class="btn btn-warning" onclick="validateAiAssistantMigration()">Validate Migration</button>
                </div>
                
                <div class="component-comparison">
                    <div>
                        <h3>Original AI Assistant Worker</h3>
                        <div class="component-container original-component" id="original-ai-assistant-container">
                            <p style="color: #666; text-align: center;">Original AI assistant worker will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated AI Assistant Worker</h3>
                        <div class="component-container migrated-component" id="migrated-ai-assistant-container">
                            <p style="color: #666; text-align: center;">Migrated AI assistant worker will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="ai-assistant-comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- Resume Editor Test -->
            <div class="test-section">
                <h2>üìù Resume Editor Migration Test</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="testResumeEditorMigration()">Test Resume Editor Migration</button>
                    <button class="btn btn-secondary" onclick="compareResumeEditorComponents()">Compare Components</button>
                    <button class="btn btn-success" onclick="createResumeEditorComponents()">Create Components</button>
                    <button class="btn btn-warning" onclick="validateResumeEditorMigration()">Validate Migration</button>
                </div>
                
                <div class="component-comparison">
                    <div>
                        <h3>Original Resume Editor</h3>
                        <div class="component-container original-component" id="original-resume-editor-container">
                            <p style="color: #666; text-align: center;">Original resume editor will appear here</p>
                        </div>
                    </div>
                    <div>
                        <h3>Migrated Resume Editor</h3>
                        <div class="component-container migrated-component" id="migrated-resume-editor-container">
                            <p style="color: #666; text-align: center;">Migrated resume editor will appear here</p>
                        </div>
                    </div>
                </div>
                
                <div id="resume-editor-comparison-results" class="log" style="margin-top: 20px;"></div>
            </div>

            <!-- Migration Utilities Test -->
            <div class="test-section">
                <h2>üîß Migration Utilities Test</h2>
                <div class="test-controls">
                    <button class="btn btn-primary" onclick="testMigrationUtils()">Test Migration Utils</button>
                    <button class="btn btn-secondary" onclick="generateMigrationReport()">Generate Report</button>
                </div>
                <div id="migration-utils-log" class="log"></div>
            </div>
        </div>
    </div>

    <!-- Include Web Components and Global Store -->
    <script type="module" src="./components/global-store.js"></script>
    <script type="module" src="./js/store.js"></script>
    
    <!-- Include the migrated and original components -->
    <script type="module" src="./components/settings-manager.js"></script>
    <script type="module" src="./components/settings-manager-migrated.js"></script>
    <script type="module" src="./components/global-store.js"></script>
    <script type="module" src="./components/global-store-migrated.js"></script>
    <script type="module" src="./components/resume-viewer.js"></script>
    <script type="module" src="./components/resume-viewer-migrated.js"></script>
    <script type="module" src="./components/api-settings.js"></script>
    <script type="module" src="./components/api-settings-migrated.js"></script>
    <script type="module" src="./components/ai-assistant-worker.js"></script>
    <script type="module" src="./components/ai-assistant-worker-migrated.js"></script>
    <script type="module" src="./components/resume-editor.js"></script>
    <script type="module" src="./components/resume-editor-migrated.js"></script>
    <script type="module" src="./components/example-modernized-component.js"></script>
    
    <!-- Include app manager and utilities -->
    <script type="module" src="./js/app-manager.js"></script>
    <script type="module" src="./js/component-migration-utils.js"></script>

    <!-- Global Store Instance -->
    <global-store></global-store>

    <!-- Test JavaScript -->
    <script type="module">
        import appManager from './js/app-manager.js';
        import { 
            analyzeComponent, 
            generateMigrationTemplate, 
            getMigrationInstructions, 
            validateMigration 
        } from './js/component-migration-utils.js';
        
        let originalSettingsComponent = null;
        let migratedSettingsComponent = null;
        let originalGlobalStore = null;
        let migratedGlobalStore = null;
        let originalResumeViewer = null;
        let migratedResumeViewer = null;
        let originalApiSettings = null;
        let migratedApiSettings = null;
        let exampleComponent = null;

        // Make functions available globally for button clicks
        window.checkAppManager = checkAppManager;
        window.listComponents = listComponents;
        window.createExampleComponent = createExampleComponent;
        window.testExampleComponent = testExampleComponent;
        window.validateExampleComponent = validateExampleComponent;
        window.removeExampleComponent = removeExampleComponent;
        window.createOriginalSettings = createOriginalSettings;
        window.createMigratedSettings = createMigratedSettings;
        window.compareComponents = compareComponents;
        window.clearSettingsTest = clearSettingsTest;
        window.createOriginalGlobalStore = createOriginalGlobalStore;
        window.createMigratedGlobalStore = createMigratedGlobalStore;
        window.compareGlobalStores = compareGlobalStores;
        window.clearGlobalStoreTest = clearGlobalStoreTest;
        window.createOriginalResumeViewer = createOriginalResumeViewer;
        window.createMigratedResumeViewer = createMigratedResumeViewer;
        window.compareResumeViewers = compareResumeViewers;
        window.clearResumeViewerTest = clearResumeViewerTest;
        window.createOriginalApiSettings = createOriginalApiSettings;
        window.createMigratedApiSettings = createMigratedApiSettings;
        window.compareApiSettings = compareApiSettings;
        window.clearApiSettingsTest = clearApiSettingsTest;
        window.testMigrationUtils = testMigrationUtils;
        window.generateMigrationReport = generateMigrationReport;

        // Initialize the test
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                log('app-manager-log', 'üöÄ Initializing test environment...');
                
                // Initialize app manager
                await appManager.init();
                
                updateStatus('app-manager-status', 'App Manager initialized successfully!', 'success');
                log('app-manager-log', '‚úÖ App Manager initialized');
                log('app-manager-log', `üìä Component registry: ${appManager.getAllComponents().size} components`);
                
            } catch (error) {
                updateStatus('app-manager-status', `Failed to initialize: ${error.message}`, 'error');
                log('app-manager-log', `‚ùå Initialization failed: ${error.message}`);
            }
        });

        function checkAppManager() {
            const status = document.getElementById('app-manager-status');
            const logEl = document.getElementById('app-manager-log');
            
            log('app-manager-log', '\nüîç Checking App Manager status...');
            
            if (window.appManager) {
                const components = appManager.getAllComponents();
                const state = appManager.getCurrentState();
                
                updateStatus('app-manager-status', `App Manager is running with ${components.size} registered components`, 'success');
                log('app-manager-log', `‚úÖ App Manager instance: ${appManager.constructor.name}`);
                log('app-manager-log', `üìä Registered components: ${components.size}`);
                log('app-manager-log', `üìã Current section: ${state.section}`);
                log('app-manager-log', `üíæ Data sections: ${Object.keys(state.data).join(', ')}`);
            } else {
                updateStatus('app-manager-status', 'App Manager not found!', 'error');
                log('app-manager-log', '‚ùå window.appManager is not available');
            }
        }

        function listComponents() {
            log('app-manager-log', '\nüìã Listing registered components...');
            
            const components = appManager.getAllComponents();
            if (components.size === 0) {
                log('app-manager-log', 'üì≠ No components registered yet');
                return;
            }
            
            components.forEach((component, id) => {
                const metadata = component.getMetadata ? component.getMetadata() : { componentName: 'Unknown' };
                log('app-manager-log', `üß© ${id}: ${metadata.componentName} (${metadata.isInitialized ? 'Ready' : 'Not Ready'})`);
            });
        }

        function createExampleComponent() {
            const container = document.getElementById('example-component-container');
            
            if (exampleComponent) {
                container.removeChild(exampleComponent);
            }
            
            exampleComponent = document.createElement('example-modernized-component');
            container.innerHTML = '';
            container.appendChild(exampleComponent);
            
            log('app-manager-log', '\nüîß Created example component');
        }

        function testExampleComponent() {
            if (!exampleComponent) {
                log('app-manager-log', '‚ùå No example component to test');
                return;
            }
            
            log('app-manager-log', '\nüß™ Testing example component methods...');
            
            // Test data methods
            const testData = { message: 'Hello from test!', timestamp: new Date().toISOString() };
            exampleComponent.setData(testData, 'test');
            
            const retrievedData = exampleComponent.getData();
            log('app-manager-log', `üì• Set data: ${JSON.stringify(testData)}`);
            log('app-manager-log', `üì§ Got data: ${JSON.stringify(retrievedData)}`);
            
            // Test validation
            const validation = exampleComponent.validate();
            log('app-manager-log', `‚úÖ Validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
            if (!validation.valid) {
                log('app-manager-log', `‚ùå Errors: ${validation.errors.join(', ')}`);
            }
            
            // Test refresh
            exampleComponent.refresh();
            log('app-manager-log', 'üîÑ Component refreshed');
            
            // Test metadata
            const metadata = exampleComponent.getMetadata();
            log('app-manager-log', `üìä Metadata: ${JSON.stringify(metadata, null, 2)}`);
        }

        function validateExampleComponent() {
            if (!exampleComponent) {
                log('app-manager-log', '‚ùå No example component to validate');
                return;
            }
            
            log('app-manager-log', '\nüîç Validating component migration...');
            
            const validation = validateMigration(exampleComponent);
            log('app-manager-log', `üìä Migration validation score: ${validation.score}/100`);
            log('app-manager-log', `‚úÖ Valid migration: ${validation.valid}`);
            
            if (validation.issues.length > 0) {
                log('app-manager-log', '‚ùå Issues:');
                validation.issues.forEach(issue => log('app-manager-log', `   - ${issue}`));
            }
            
            if (validation.warnings.length > 0) {
                log('app-manager-log', '‚ö†Ô∏è  Warnings:');
                validation.warnings.forEach(warning => log('app-manager-log', `   - ${warning}`));
            }
            
            if (validation.valid && validation.issues.length === 0) {
                log('app-manager-log', 'üéâ Component migration is SUCCESSFUL!');
            }
        }

        function removeExampleComponent() {
            if (exampleComponent) {
                const container = document.getElementById('example-component-container');
                container.removeChild(exampleComponent);
                exampleComponent = null;
                container.innerHTML = '<p style="color: #666; text-align: center;">Component removed</p>';
                log('app-manager-log', 'üóëÔ∏è  Example component removed');
            }
        }

        function createOriginalSettings() {
            const container = document.getElementById('original-settings-container');
            
            if (originalSettingsComponent) {
                container.removeChild(originalSettingsComponent);
            }
            
            originalSettingsComponent = document.createElement('settings-manager');
            container.innerHTML = '';
            container.appendChild(originalSettingsComponent);
            
            log('comparison-results', 'üìä Created original settings manager');
        }

        function createMigratedSettings() {
            const container = document.getElementById('migrated-settings-container');
            
            if (migratedSettingsComponent) {
                container.removeChild(migratedSettingsComponent);
            }
            
            migratedSettingsComponent = document.createElement('settings-manager-migrated');
            container.innerHTML = '';
            container.appendChild(migratedSettingsComponent);
            
            log('comparison-results', 'üîß Created migrated settings manager');
        }

        function compareComponents() {
            log('comparison-results', '\n‚öñÔ∏è  Comparing original vs migrated components...');
            
            if (!originalSettingsComponent) {
                log('comparison-results', '‚ùå Original component not created');
                return;
            }
            
            if (!migratedSettingsComponent) {
                log('comparison-results', '‚ùå Migrated component not created');
                return;
            }
            
            // Compare basic properties
            log('comparison-results', '\nüìä Basic Comparison:');
            log('comparison-results', `Original extends: ${originalSettingsComponent.constructor.__proto__.name}`);
            log('comparison-results', `Migrated extends: ${migratedSettingsComponent.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('comparison-results', '\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalSettingsComponent[method] === 'function';
                const migratedHas = typeof migratedSettingsComponent[method] === 'function';
                log('comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`);
            });
            
            // Test migrated component specifically
            if (migratedSettingsComponent.isReady && migratedSettingsComponent.isReady()) {
                const validation = migratedSettingsComponent.validate();
                log('comparison-results', `\n‚úÖ Migrated component validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                
                const metadata = migratedSettingsComponent.getMetadata();
                log('comparison-results', `üìä Migrated component ready: ${metadata.isInitialized}`);
            }
            
            log('comparison-results', '\nüéâ Migration comparison complete!');
        }

        function clearSettingsTest() {
            const originalContainer = document.getElementById('original-settings-container');
            const migratedContainer = document.getElementById('migrated-settings-container');
            
            originalContainer.innerHTML = '<p style="color: #666; text-align: center;">Original component will appear here</p>';
            migratedContainer.innerHTML = '<p style="color: #666; text-align: center;">Migrated component will appear here</p>';
            
            originalSettingsComponent = null;
            migratedSettingsComponent = null;
            
            log('comparison-results', 'üßπ Settings test cleared');
        }

        // AI Assistant Worker test functions
        let originalAiAssistantComponent = null;
        let migratedAiAssistantComponent = null;

        function createAiAssistantComponents() {
            const originalContainer = document.getElementById('original-ai-assistant-container');
            const migratedContainer = document.getElementById('migrated-ai-assistant-container');
            
            log('ai-assistant-comparison-results', '\nü§ñ Creating AI Assistant Worker components...');
            
            // Clear existing components
            originalContainer.innerHTML = '';
            migratedContainer.innerHTML = '';
            
            // Create original component
            originalAiAssistantComponent = document.createElement('ai-assistant-worker');
            originalContainer.appendChild(originalAiAssistantComponent);
            
            // Create migrated component
            migratedAiAssistantComponent = document.createElement('ai-assistant-worker-migrated');
            migratedContainer.appendChild(migratedAiAssistantComponent);
            
            log('ai-assistant-comparison-results', '‚úÖ AI Assistant Worker components created');
        }

        function testAiAssistantMigration() {
            if (!originalAiAssistantComponent || !migratedAiAssistantComponent) {
                log('ai-assistant-comparison-results', '‚ùå Please create components first');
                return;
            }
            
            log('ai-assistant-comparison-results', '\nüß™ Testing AI Assistant Worker migration...');
            
            // Test ComponentBase methods on migrated component
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('ai-assistant-comparison-results', '\nüîß Testing ComponentBase methods:');
            
            componentBaseMethods.forEach(method => {
                const migratedHas = typeof migratedAiAssistantComponent[method] === 'function';
                log('ai-assistant-comparison-results', `${method}: ${migratedHas ? '‚úÖ' : '‚ùå'}`);
            });
            
            // Test data handling if component is ready
            try {
                if (migratedAiAssistantComponent.isReady && migratedAiAssistantComponent.isReady()) {
                    // Test data methods
                    const testData = { 
                        currentJob: { id: 'test-job', title: 'Test Position' },
                        currentResume: { id: 'test-resume', data: { basics: { name: 'Test User' } } }
                    };
                    
                    migratedAiAssistantComponent.setData(testData, 'migration-test');
                    const retrievedData = migratedAiAssistantComponent.getData();
                    
                    log('ai-assistant-comparison-results', `üì• Data test: ${retrievedData ? '‚úÖ' : '‚ùå'}`);
                    
                    // Test validation
                    const validation = migratedAiAssistantComponent.validate();
                    log('ai-assistant-comparison-results', `‚úÖ Validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                    if (!validation.valid) {
                        validation.errors.forEach(error => {
                            log('ai-assistant-comparison-results', `   ‚ùå ${error}`);
                        });
                    }
                    
                    // Test refresh
                    migratedAiAssistantComponent.refresh();
                    log('ai-assistant-comparison-results', 'üîÑ Refresh test: ‚úÖ');
                    
                } else {
                    log('ai-assistant-comparison-results', '‚è≥ Component not ready for advanced testing');
                }
            } catch (error) {
                log('ai-assistant-comparison-results', `‚ùå Testing error: ${error.message}`);
            }
            
            log('ai-assistant-comparison-results', '\n‚úÖ AI Assistant Worker migration test complete!');
        }

        function compareAiAssistantComponents() {
            if (!originalAiAssistantComponent || !migratedAiAssistantComponent) {
                log('ai-assistant-comparison-results', '‚ùå Please create components first');
                return;
            }
            
            log('ai-assistant-comparison-results', '\n‚öñÔ∏è Comparing AI Assistant Worker components...');
            
            // Basic comparison
            log('ai-assistant-comparison-results', '\nüìä Basic Comparison:');
            log('ai-assistant-comparison-results', `Original extends: ${originalAiAssistantComponent.constructor.__proto__.name}`);
            log('ai-assistant-comparison-results', `Migrated extends: ${migratedAiAssistantComponent.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('ai-assistant-comparison-results', '\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalAiAssistantComponent[method] === 'function';
                const migratedHas = typeof migratedAiAssistantComponent[method] === 'function';
                log('ai-assistant-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`);
            });
            
            // Test migrated component specifically
            if (migratedAiAssistantComponent.isReady && migratedAiAssistantComponent.isReady()) {
                const validation = migratedAiAssistantComponent.validate();
                log('ai-assistant-comparison-results', `\n‚úÖ Migrated component validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                
                const metadata = migratedAiAssistantComponent.getMetadata();
                log('ai-assistant-comparison-results', `üìä Migrated component ready: ${metadata.isInitialized}`);
                
                // Test public API methods specific to AI assistant
                const aiMethods = ['setCurrentJob', 'setCurrentResume', 'getCurrentJob', 'getCurrentResume', 'isProcessing'];
                log('ai-assistant-comparison-results', '\nü§ñ AI Assistant Methods:');
                aiMethods.forEach(method => {
                    const originalHas = typeof originalAiAssistantComponent[method] === 'function';
                    const migratedHas = typeof migratedAiAssistantComponent[method] === 'function';
                    log('ai-assistant-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`);
                });
            }
            
            log('ai-assistant-comparison-results', '\nüéâ AI Assistant Worker comparison complete!');
        }

        function validateAiAssistantMigration() {
            if (!migratedAiAssistantComponent) {
                log('ai-assistant-comparison-results', '‚ùå Please create migrated component first');
                return;
            }
            
            log('ai-assistant-comparison-results', '\nüîç Validating AI Assistant Worker migration...');
            
            const validation = validateMigration(migratedAiAssistantComponent);
            log('ai-assistant-comparison-results', `üìä Migration score: ${validation.score}/100`);
            log('ai-assistant-comparison-results', `‚úÖ Migration valid: ${validation.valid ? 'YES' : 'NO'}`);
            
            if (validation.details) {
                log('ai-assistant-comparison-results', '\nüìã Migration details:');
                Object.entries(validation.details).forEach(([category, result]) => {
                    const status = result === true ? '‚úÖ' : result === false ? '‚ùå' : '‚ö†Ô∏è';
                    log('ai-assistant-comparison-results', `   ${status} ${category}: ${result}`);
                });
            }
            
            if (validation.suggestions && validation.suggestions.length > 0) {
                log('ai-assistant-comparison-results', '\nüí° Suggestions:');
                validation.suggestions.forEach(suggestion => {
                    log('ai-assistant-comparison-results', `   - ${suggestion}`);
                });
            }
            
            log('ai-assistant-comparison-results', '\nüéØ AI Assistant Worker validation complete!');
        }

        // Resume Editor test functions
        let originalResumeEditorComponent = null;
        let migratedResumeEditorComponent = null;

        function createResumeEditorComponents() {
            const originalContainer = document.getElementById('original-resume-editor-container');
            const migratedContainer = document.getElementById('migrated-resume-editor-container');
            
            log('resume-editor-comparison-results', '\nüìù Creating Resume Editor components...');
            
            // Clear existing components
            originalContainer.innerHTML = '';
            migratedContainer.innerHTML = '';
            
            // Create original component
            originalResumeEditorComponent = document.createElement('resume-editor');
            originalContainer.appendChild(originalResumeEditorComponent);
            
            // Create migrated component
            migratedResumeEditorComponent = document.createElement('resume-editor-migrated');
            migratedContainer.appendChild(migratedResumeEditorComponent);
            
            log('resume-editor-comparison-results', '‚úÖ Resume Editor components created');
        }

        function testResumeEditorMigration() {
            if (!originalResumeEditorComponent || !migratedResumeEditorComponent) {
                log('resume-editor-comparison-results', '‚ùå Please create components first');
                return;
            }
            
            log('resume-editor-comparison-results', '\nüß™ Testing Resume Editor migration...');
            
            // Test ComponentBase methods on migrated component
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('resume-editor-comparison-results', '\nüîß Testing ComponentBase methods:');
            
            componentBaseMethods.forEach(method => {
                const migratedHas = typeof migratedResumeEditorComponent[method] === 'function';
                log('resume-editor-comparison-results', `${method}: ${migratedHas ? '‚úÖ' : '‚ùå'}`);
            });
            
            // Test data handling if component is ready
            try {
                if (migratedResumeEditorComponent.isReady && migratedResumeEditorComponent.isReady()) {
                    // Test data methods with sample resume data
                    const testData = {
                        basics: {
                            name: 'Test User',
                            email: 'test@example.com',
                            summary: 'Test summary',
                            location: { city: 'Test City' }
                        },
                        work: [{
                            name: 'Test Company',
                            position: 'Test Position',
                            startDate: '2020-01-01',
                            highlights: ['Test achievement']
                        }],
                        education: [],
                        skills: [],
                        projects: [],
                        volunteer: []
                    };
                    
                    migratedResumeEditorComponent.setData(testData, 'migration-test');
                    const retrievedData = migratedResumeEditorComponent.getData();
                    
                    log('resume-editor-comparison-results', `üì• Data test: ${retrievedData ? '‚úÖ' : '‚ùå'}`);
                    
                    // Test validation
                    const validation = migratedResumeEditorComponent.validate();
                    log('resume-editor-comparison-results', `‚úÖ Validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                    if (!validation.valid) {
                        validation.errors.forEach(error => {
                            log('resume-editor-comparison-results', `   ‚ùå ${error}`);
                        });
                    }
                    
                    // Test refresh
                    migratedResumeEditorComponent.refresh();
                    log('resume-editor-comparison-results', 'üîÑ Refresh test: ‚úÖ');
                    
                    // Test tab switching
                    if (typeof migratedResumeEditorComponent.setCurrentTab === 'function') {
                        migratedResumeEditorComponent.setCurrentTab('work');
                        const currentTab = migratedResumeEditorComponent.getCurrentTab();
                        log('resume-editor-comparison-results', `üìë Tab switching: ${currentTab === 'work' ? '‚úÖ' : '‚ùå'}`);
                    }
                    
                } else {
                    log('resume-editor-comparison-results', '‚è≥ Component not ready for advanced testing');
                }
            } catch (error) {
                log('resume-editor-comparison-results', `‚ùå Testing error: ${error.message}`);
            }
            
            log('resume-editor-comparison-results', '\n‚úÖ Resume Editor migration test complete!');
        }

        function compareResumeEditorComponents() {
            if (!originalResumeEditorComponent || !migratedResumeEditorComponent) {
                log('resume-editor-comparison-results', '‚ùå Please create components first');
                return;
            }
            
            log('resume-editor-comparison-results', '\n‚öñÔ∏è Comparing Resume Editor components...');
            
            // Basic comparison
            log('resume-editor-comparison-results', '\nüìä Basic Comparison:');
            log('resume-editor-comparison-results', `Original extends: ${originalResumeEditorComponent.constructor.__proto__.name}`);
            log('resume-editor-comparison-results', `Migrated extends: ${migratedResumeEditorComponent.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('resume-editor-comparison-results', '\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalResumeEditorComponent[method] === 'function';
                const migratedHas = typeof migratedResumeEditorComponent[method] === 'function';
                log('resume-editor-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`);
            });
            
            // Test migrated component specifically
            if (migratedResumeEditorComponent.isReady && migratedResumeEditorComponent.isReady()) {
                const validation = migratedResumeEditorComponent.validate();
                log('resume-editor-comparison-results', `\n‚úÖ Migrated component validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                
                const metadata = migratedResumeEditorComponent.getMetadata();
                log('resume-editor-comparison-results', `üìä Migrated component ready: ${metadata.isInitialized}`);
                
                // Test public API methods specific to resume editor
                const resumeEditorMethods = ['getResumeData', 'setResumeData', 'getCurrentTab', 'setCurrentTab', 'generatePreview'];
                log('resume-editor-comparison-results', '\nüìù Resume Editor Methods:');
                resumeEditorMethods.forEach(method => {
                    const originalHas = typeof originalResumeEditorComponent[method] === 'function';
                    const migratedHas = typeof migratedResumeEditorComponent[method] === 'function';
                    log('resume-editor-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`);
                });
                
                // Test form complexity
                const originalForms = originalResumeEditorComponent.querySelectorAll('input, textarea, select').length;
                const migratedForms = migratedResumeEditorComponent.querySelectorAll('input, textarea, select').length;
                log('resume-editor-comparison-results', `\nüìã Form elements: Original(${originalForms}) Migrated(${migratedForms})`);
                
                // Test modal count
                const originalModals = originalResumeEditorComponent.querySelectorAll('.modal').length;
                const migratedModals = migratedResumeEditorComponent.querySelectorAll('.modal').length;
                log('resume-editor-comparison-results', `ü™ü Modal dialogs: Original(${originalModals}) Migrated(${migratedModals})`);
            }
            
            log('resume-editor-comparison-results', '\nüéâ Resume Editor comparison complete!');
        }

        function validateResumeEditorMigration() {
            if (!migratedResumeEditorComponent) {
                log('resume-editor-comparison-results', '‚ùå Please create migrated component first');
                return;
            }
            
            log('resume-editor-comparison-results', '\nüîç Validating Resume Editor migration...');
            
            const validation = validateMigration(migratedResumeEditorComponent);
            log('resume-editor-comparison-results', `üìä Migration score: ${validation.score}/100`);
            log('resume-editor-comparison-results', `‚úÖ Migration valid: ${validation.valid ? 'YES' : 'NO'}`);
            
            if (validation.details) {
                log('resume-editor-comparison-results', '\nüìã Migration details:');
                Object.entries(validation.details).forEach(([category, result]) => {
                    const status = result === true ? '‚úÖ' : result === false ? '‚ùå' : '‚ö†Ô∏è';
                    log('resume-editor-comparison-results', `   ${status} ${category}: ${result}`);
                });
            }
            
            if (validation.suggestions && validation.suggestions.length > 0) {
                log('resume-editor-comparison-results', '\nüí° Suggestions:');
                validation.suggestions.forEach(suggestion => {
                    log('resume-editor-comparison-results', `   - ${suggestion}`);
                });
            }
            
            // Additional resume editor specific validation
            log('resume-editor-comparison-results', '\nüìù Resume Editor Specific Validation:');
            
            // Check for tab functionality
            const tabs = migratedResumeEditorComponent.querySelectorAll('.tab');
            log('resume-editor-comparison-results', `üìë Tab navigation: ${tabs.length > 0 ? '‚úÖ' : '‚ùå'} (${tabs.length} tabs)`);
            
            // Check for modals
            const modals = migratedResumeEditorComponent.querySelectorAll('.modal');
            log('resume-editor-comparison-results', `ü™ü Modal dialogs: ${modals.length > 0 ? '‚úÖ' : '‚ùå'} (${modals.length} modals)`);
            
            // Check for form inputs
            const inputs = migratedResumeEditorComponent.querySelectorAll('input, textarea, select');
            log('resume-editor-comparison-results', `üìã Form inputs: ${inputs.length > 0 ? '‚úÖ' : '‚ùå'} (${inputs.length} inputs)`);
            
            // Check for preview functionality
            const previewContainer = migratedResumeEditorComponent.querySelector('#preview-content');
            log('resume-editor-comparison-results', `üëÅÔ∏è Preview container: ${previewContainer ? '‚úÖ' : '‚ùå'}`);
            
            log('resume-editor-comparison-results', '\nüéØ Resume Editor validation complete!');
        }

        function testMigrationUtils() {
            log('migration-utils-log', '\nüîß Testing migration utilities...');
            
            // Test component analysis
            if (originalSettingsComponent) {
                const analysis = analyzeComponent(originalSettingsComponent);
                log('migration-utils-log', `üìä Component analysis for ${analysis.componentName}:`);
                log('migration-utils-log', `   Needs migration: ${analysis.needsMigration}`);
                log('migration-utils-log', `   Complexity: ${analysis.complexity}`);
                log('migration-utils-log', `   Issues: ${analysis.issues.length}`);
                analysis.issues.forEach(issue => log('migration-utils-log', `     - ${issue}`));
            }
            
            // Test migration instructions
            const instructions = getMigrationInstructions('settings-manager');
            log('migration-utils-log', `\nüìã Migration instructions for ${instructions.componentName}:`);
            log('migration-utils-log', `   Difficulty: ${instructions.difficulty}`);
            log('migration-utils-log', `   Estimated time: ${instructions.estimatedTime}`);
            log('migration-utils-log', `   Steps: ${instructions.steps.length}`);
            
            // Test template generation
            const template = generateMigrationTemplate('ExampleComponent', {
                usesShadowDOM: true,
                hasFormValidation: true
            });
            log('migration-utils-log', '\nüìù Generated migration template (first 200 chars):');
            log('migration-utils-log', template.substring(0, 200) + '...');
            
            log('migration-utils-log', '\n‚úÖ Migration utilities test complete!');
        }

        function generateMigrationReport() {
            log('migration-utils-log', '\nüìä Generating migration report...');
            
            const components = [
                'settings-manager',
                'global-store', 
                'resume-viewer',
                'resume-editor',
                'ai-assistant-worker',
                'job-manager'
            ];
            
            components.forEach(component => {
                const instructions = getMigrationInstructions(component);
                log('migration-utils-log', `\nüì¶ ${component}:`);
                log('migration-utils-log', `   Priority: ${instructions.difficulty}`);
                log('migration-utils-log', `   Time: ${instructions.estimatedTime}`);
                instructions.specificNotes.forEach(note => {
                    log('migration-utils-log', `   Note: ${note}`);
                });
            });
            
            log('migration-utils-log', '\nüéØ Recommended migration order:');
            log('migration-utils-log', '1. settings-manager (Low complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '2. global-store (Low complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '3. resume-viewer (Medium complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '4. api-settings (Medium complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '5. ai-assistant-worker (Medium complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '6. resume-editor (High complexity) ‚úÖ COMPLETED');
            log('migration-utils-log', '7. job-manager (High complexity)');
        }

        // Global Store Testing Functions
        function createOriginalGlobalStore() {
            const container = document.getElementById('original-store-container');
            
            if (originalGlobalStore) {
                container.removeChild(originalGlobalStore);
            }
            
            originalGlobalStore = document.createElement('global-store');
            container.innerHTML = '';
            container.appendChild(originalGlobalStore);
            
            // Add visual indicator since store is invisible
            const indicator = document.createElement('div');
            indicator.style.cssText = 'padding: 20px; background: #f0f0f0; border-radius: 4px; text-align: center; color: #666;';
            indicator.innerHTML = `
                <p>‚úÖ Original Global Store Created</p>
                <p>Component ID: global-store</p>
                <p>Type: HTMLElement</p>
                <p style="font-size: 12px; margin-top: 10px;">This component is invisible but actively managing state</p>
            `;
            container.appendChild(indicator);
            
            log('store-comparison-results', 'üìä Created original global store');
        }

        function createMigratedGlobalStore() {
            const container = document.getElementById('migrated-store-container');
            
            if (migratedGlobalStore) {
                container.removeChild(migratedGlobalStore);
            }
            
            migratedGlobalStore = document.createElement('global-store-migrated');
            container.innerHTML = '';
            container.appendChild(migratedGlobalStore);
            
            // Add visual indicator since store is invisible
            const indicator = document.createElement('div');
            indicator.style.cssText = 'padding: 20px; background: #f0f8f0; border-radius: 4px; text-align: center; color: #666;';
            indicator.innerHTML = `
                <p>‚úÖ Migrated Global Store Created</p>
                <p>Component ID: global-store-migrated</p>
                <p>Type: ComponentBase</p>
                <p style="font-size: 12px; margin-top: 10px;">This component is invisible but actively managing state</p>
            `;
            container.appendChild(indicator);
            
            log('store-comparison-results', 'üîß Created migrated global store');
        }

        function compareGlobalStores() {
            log('store-comparison-results', '\\n‚öñÔ∏è  Comparing original vs migrated global stores...');
            
            if (!originalGlobalStore) {
                log('store-comparison-results', '‚ùå Original global store not created');
                return;
            }
            
            if (!migratedGlobalStore) {
                log('store-comparison-results', '‚ùå Migrated global store not created');
                return;
            }
            
            // Compare basic properties
            log('store-comparison-results', '\\nüìä Basic Comparison:');
            log('store-comparison-results', `Original extends: ${originalGlobalStore.constructor.__proto__.name}`);
            log('store-comparison-results', `Migrated extends: ${migratedGlobalStore.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('store-comparison-results', '\\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalGlobalStore[method] === 'function';
                const migratedHas = typeof migratedGlobalStore[method] === 'function';
                log('store-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Check Global Store specific methods
            const storeMethods = ['setState', 'getState', 'subscribe', 'unsubscribe', 'addJob', 'updateJob', 'deleteJob', 'debug'];
            log('store-comparison-results', '\\nüè¨ Global Store Methods:');
            storeMethods.forEach(method => {
                const originalHas = typeof originalGlobalStore[method] === 'function';
                const migratedHas = typeof migratedGlobalStore[method] === 'function';
                log('store-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Test basic functionality
            log('store-comparison-results', '\\nüß™ Functionality Tests:');
            
            // Test state operations
            try {
                // Test original store
                const originalState = originalGlobalStore.getState();
                log('store-comparison-results', `Original state keys: ${Object.keys(originalState || {}).join(', ')}`);
                
                // Test migrated store
                if (migratedGlobalStore.isReady && migratedGlobalStore.isReady()) {
                    const migratedState = migratedGlobalStore.getState();
                    log('store-comparison-results', `Migrated state keys: ${Object.keys(migratedState || {}).join(', ')}`);
                    
                    // Test validation
                    const validation = migratedGlobalStore.validate();
                    log('store-comparison-results', `‚úÖ Migrated store validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                    if (!validation.valid) {
                        validation.errors.forEach(error => log('store-comparison-results', `   ‚ùå ${error}`));
                    }
                    
                    // Test metadata
                    const metadata = migratedGlobalStore.getMetadata();
                    log('store-comparison-results', `üìä Migrated store ready: ${metadata.isInitialized}`);
                    
                    // Test state operation
                    migratedGlobalStore.setState({ testValue: Date.now() }, 'test');
                    log('store-comparison-results', 'üìù State update test successful');
                    
                } else {
                    log('store-comparison-results', '‚è≥ Migrated store not ready yet');
                }
                
            } catch (error) {
                log('store-comparison-results', `‚ùå Functionality test error: ${error.message}`);
            }
            
            log('store-comparison-results', '\\nüéâ Global store migration comparison complete!');
        }

        function clearGlobalStoreTest() {
            const originalContainer = document.getElementById('original-store-container');
            const migratedContainer = document.getElementById('migrated-store-container');
            
            originalContainer.innerHTML = '<p style="color: #666; text-align: center;">Original global store will appear here</p>';
            migratedContainer.innerHTML = '<p style="color: #666; text-align: center;">Migrated global store will appear here</p>';
            
            originalGlobalStore = null;
            migratedGlobalStore = null;
            
            log('store-comparison-results', 'üßπ Global store test cleared');
        }

        // Resume Viewer Testing Functions
        function createOriginalResumeViewer() {
            const container = document.getElementById('original-viewer-container');
            
            if (originalResumeViewer) {
                container.removeChild(originalResumeViewer);
            }
            
            originalResumeViewer = document.createElement('resume-viewer');
            
            // Set some sample resume data
            const sampleResumeData = {
                basics: {
                    name: "John Doe",
                    label: "Software Engineer",
                    email: "john.doe@example.com",
                    phone: "(555) 123-4567",
                    summary: "Experienced software engineer with a passion for building scalable applications.",
                    location: {
                        city: "San Francisco",
                        region: "CA"
                    },
                    profiles: [
                        { network: "LinkedIn", url: "https://linkedin.com/in/johndoe" },
                        { network: "GitHub", url: "https://github.com/johndoe" }
                    ]
                },
                work: [
                    {
                        name: "Tech Corp",
                        position: "Senior Software Engineer",
                        startDate: "2020-01-01",
                        endDate: null,
                        summary: "Lead development of web applications",
                        highlights: ["Built scalable architecture", "Mentored junior developers"]
                    }
                ],
                education: [
                    {
                        institution: "State University",
                        area: "Computer Science",
                        studyType: "Bachelor of Science",
                        startDate: "2016-09-01",
                        endDate: "2020-05-01"
                    }
                ],
                skills: [
                    {
                        name: "Programming Languages",
                        keywords: ["JavaScript", "Python", "Java", "Go"]
                    },
                    {
                        name: "Frameworks",
                        keywords: ["React", "Node.js", "Django", "Express"]
                    }
                ]
            };
            
            container.innerHTML = '';
            container.appendChild(originalResumeViewer);
            
            // Set the resume data
            originalResumeViewer.resumeData = sampleResumeData;
            
            log('viewer-comparison-results', 'üìä Created original resume viewer with sample data');
        }

        function createMigratedResumeViewer() {
            const container = document.getElementById('migrated-viewer-container');
            
            if (migratedResumeViewer) {
                container.removeChild(migratedResumeViewer);
            }
            
            migratedResumeViewer = document.createElement('resume-viewer-migrated');
            
            // Set the same sample resume data
            const sampleResumeData = {
                basics: {
                    name: "John Doe",
                    label: "Software Engineer",
                    email: "john.doe@example.com",
                    phone: "(555) 123-4567",
                    summary: "Experienced software engineer with a passion for building scalable applications.",
                    location: {
                        city: "San Francisco",
                        region: "CA"
                    },
                    profiles: [
                        { network: "LinkedIn", url: "https://linkedin.com/in/johndoe" },
                        { network: "GitHub", url: "https://github.com/johndoe" }
                    ]
                },
                work: [
                    {
                        name: "Tech Corp",
                        position: "Senior Software Engineer",
                        startDate: "2020-01-01",
                        endDate: null,
                        summary: "Lead development of web applications",
                        highlights: ["Built scalable architecture", "Mentored junior developers"]
                    }
                ],
                education: [
                    {
                        institution: "State University",
                        area: "Computer Science",
                        studyType: "Bachelor of Science",
                        startDate: "2016-09-01",
                        endDate: "2020-05-01"
                    }
                ],
                skills: [
                    {
                        name: "Programming Languages",
                        keywords: ["JavaScript", "Python", "Java", "Go"]
                    },
                    {
                        name: "Frameworks",
                        keywords: ["React", "Node.js", "Django", "Express"]
                    }
                ]
            };
            
            container.innerHTML = '';
            container.appendChild(migratedResumeViewer);
            
            // Use ComponentBase method to set data
            setTimeout(() => {
                if (migratedResumeViewer.setResumeData) {
                    migratedResumeViewer.setResumeData(sampleResumeData);
                }
            }, 100);
            
            log('viewer-comparison-results', 'üîß Created migrated resume viewer with sample data');
        }

        function compareResumeViewers() {
            log('viewer-comparison-results', '\\n‚öñÔ∏è  Comparing original vs migrated resume viewers...');
            
            if (!originalResumeViewer) {
                log('viewer-comparison-results', '‚ùå Original resume viewer not created');
                return;
            }
            
            if (!migratedResumeViewer) {
                log('viewer-comparison-results', '‚ùå Migrated resume viewer not created');
                return;
            }
            
            // Compare basic properties
            log('viewer-comparison-results', '\\nüìä Basic Comparison:');
            log('viewer-comparison-results', `Original extends: ${originalResumeViewer.constructor.__proto__.name}`);
            log('viewer-comparison-results', `Migrated extends: ${migratedResumeViewer.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('viewer-comparison-results', '\\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalResumeViewer[method] === 'function';
                const migratedHas = typeof migratedResumeViewer[method] === 'function';
                log('viewer-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Check Resume Viewer specific methods
            const viewerMethods = ['setResumeData', 'setTemplate', 'getAvailableThemes', 'openInNewWindow', 'loadDataFromUrl'];
            log('viewer-comparison-results', '\\nüìÑ Resume Viewer Methods:');
            viewerMethods.forEach(method => {
                const originalHas = typeof originalResumeViewer[method] === 'function';
                const migratedHas = typeof migratedResumeViewer[method] === 'function';
                log('viewer-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Test basic functionality
            log('viewer-comparison-results', '\\nüß™ Functionality Tests:');
            
            try {
                // Test template switching
                log('viewer-comparison-results', 'üìã Testing template switching...');
                
                // Test original viewer
                if (originalResumeViewer.setTemplate) {
                    originalResumeViewer.setTemplate('modern');
                    log('viewer-comparison-results', '‚úÖ Original viewer template switch to modern: SUCCESS');
                }
                
                // Test migrated viewer
                if (migratedResumeViewer.isReady && migratedResumeViewer.isReady()) {
                    if (migratedResumeViewer.setTemplate) {
                        migratedResumeViewer.setTemplate('modern');
                        log('viewer-comparison-results', '‚úÖ Migrated viewer template switch to modern: SUCCESS');
                    }
                    
                    // Test validation
                    const validation = migratedResumeViewer.validate();
                    log('viewer-comparison-results', `‚úÖ Migrated viewer validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                    if (!validation.valid) {
                        validation.errors.forEach(error => log('viewer-comparison-results', `   ‚ùå ${error}`));
                    }
                    
                    // Test metadata
                    const metadata = migratedResumeViewer.getMetadata();
                    log('viewer-comparison-results', `üìä Migrated viewer ready: ${metadata.isInitialized}`);
                    
                    // Test available themes
                    const themes = migratedResumeViewer.getAvailableThemes();
                    log('viewer-comparison-results', `üìã Available local themes: ${themes.local.join(', ')}`);
                    log('viewer-comparison-results', `üìã Available hosted themes: ${themes.hosted.length} themes`);
                    
                } else {
                    log('viewer-comparison-results', '‚è≥ Migrated viewer not ready yet');
                }
                
                // Test data comparison
                const originalData = originalResumeViewer.resumeData;
                const migratedData = migratedResumeViewer.getData();
                
                log('viewer-comparison-results', `\\nüìã Data Comparison:`);
                log('viewer-comparison-results', `Original has data: ${originalData ? 'YES' : 'NO'}`);
                log('viewer-comparison-results', `Migrated has data: ${migratedData ? 'YES' : 'NO'}`);
                
                if (originalData && migratedData) {
                    log('viewer-comparison-results', `Original name: ${originalData.basics?.name || 'N/A'}`);
                    log('viewer-comparison-results', `Migrated name: ${migratedData.basics?.name || 'N/A'}`);
                }
                
            } catch (error) {
                log('viewer-comparison-results', `‚ùå Functionality test error: ${error.message}`);
            }
            
            log('viewer-comparison-results', '\\nüéâ Resume viewer migration comparison complete!');
        }

        function clearResumeViewerTest() {
            const originalContainer = document.getElementById('original-viewer-container');
            const migratedContainer = document.getElementById('migrated-viewer-container');
            
            originalContainer.innerHTML = '<p style="color: #666; text-align: center;">Original resume viewer will appear here</p>';
            migratedContainer.innerHTML = '<p style="color: #666; text-align: center;">Migrated resume viewer will appear here</p>';
            
            originalResumeViewer = null;
            migratedResumeViewer = null;
            
            log('viewer-comparison-results', 'üßπ Resume viewer test cleared');
        }

        // API Settings Testing Functions
        function createOriginalApiSettings() {
            const container = document.getElementById('original-api-container');
            
            if (originalApiSettings) {
                container.removeChild(originalApiSettings);
            }
            
            originalApiSettings = document.createElement('api-settings');
            container.innerHTML = '';
            container.appendChild(originalApiSettings);
            
            log('api-comparison-results', 'üìä Created original API settings component');
        }

        function createMigratedApiSettings() {
            const container = document.getElementById('migrated-api-container');
            
            if (migratedApiSettings) {
                container.removeChild(migratedApiSettings);
            }
            
            migratedApiSettings = document.createElement('api-settings-migrated');
            container.innerHTML = '';
            container.appendChild(migratedApiSettings);
            
            // Set some test data after initialization
            setTimeout(() => {
                if (migratedApiSettings.setApiKey) {
                    // Set test API keys (not real keys)
                    migratedApiSettings.setApiKey('claude', 'sk-ant-test123456789');
                    migratedApiSettings.setApiKey('chatgpt', 'sk-test123456789');
                }
            }, 100);
            
            log('api-comparison-results', 'üîß Created migrated API settings component with test data');
        }

        function compareApiSettings() {
            log('api-comparison-results', '\\n‚öñÔ∏è  Comparing original vs migrated API settings...');
            
            if (!originalApiSettings) {
                log('api-comparison-results', '‚ùå Original API settings not created');
                return;
            }
            
            if (!migratedApiSettings) {
                log('api-comparison-results', '‚ùå Migrated API settings not created');
                return;
            }
            
            // Compare basic properties
            log('api-comparison-results', '\\nüìä Basic Comparison:');
            log('api-comparison-results', `Original extends: ${originalApiSettings.constructor.__proto__.name}`);
            log('api-comparison-results', `Migrated extends: ${migratedApiSettings.constructor.__proto__.name}`);
            
            // Check ComponentBase methods
            const componentBaseMethods = ['setData', 'getData', 'refresh', 'validate', 'isReady', 'getMetadata'];
            log('api-comparison-results', '\\nüîß ComponentBase Methods:');
            componentBaseMethods.forEach(method => {
                const originalHas = typeof originalApiSettings[method] === 'function';
                const migratedHas = typeof migratedApiSettings[method] === 'function';
                log('api-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Check API Settings specific methods
            const apiMethods = ['saveApiKey', 'testApiKey', 'getApiKey', 'setApiKey', 'setSelectedService', 'getSelectedService'];
            log('api-comparison-results', '\\nüîë API Settings Methods:');
            apiMethods.forEach(method => {
                const originalHas = typeof originalApiSettings[method] === 'function';
                const migratedHas = typeof migratedApiSettings[method] === 'function';
                log('api-comparison-results', `${method}: Original(${originalHas ? '‚úÖ' : '‚ùå'}) Migrated(${migratedHas ? '‚úÖ' : '‚ùå'})`)
            });
            
            // Test basic functionality
            log('api-comparison-results', '\\nüß™ Functionality Tests:');
            
            try {
                // Test migrated component specifically
                if (migratedApiSettings.isReady && migratedApiSettings.isReady()) {
                    // Test validation
                    const validation = migratedApiSettings.validate();
                    log('api-comparison-results', `‚úÖ Migrated API settings validation: ${validation.valid ? 'PASSED' : 'FAILED'}`);
                    if (!validation.valid) {
                        validation.errors.forEach(error => log('api-comparison-results', `   ‚ùå ${error}`));
                    }
                    
                    // Test metadata
                    const metadata = migratedApiSettings.getMetadata();
                    log('api-comparison-results', `üìä Migrated API settings ready: ${metadata.isInitialized}`);
                    
                    // Test API key methods
                    if (migratedApiSettings.getApiKey) {
                        const claudeKey = migratedApiSettings.getApiKey('claude');
                        const chatgptKey = migratedApiSettings.getApiKey('chatgpt');
                        log('api-comparison-results', `üîë Claude key set: ${claudeKey ? 'YES' : 'NO'}`);
                        log('api-comparison-results', `üîë ChatGPT key set: ${chatgptKey ? 'YES' : 'NO'}`);
                    }
                    
                    // Test service selection
                    if (migratedApiSettings.getSelectedService) {
                        const selectedService = migratedApiSettings.getSelectedService();
                        log('api-comparison-results', `üìã Selected service: ${selectedService}`);
                        
                        // Test service switching
                        if (migratedApiSettings.setSelectedService) {
                            migratedApiSettings.setSelectedService('chatgpt');
                            const newService = migratedApiSettings.getSelectedService();
                            log('api-comparison-results', `üìã Service switched to: ${newService}`);
                        }
                    }
                    
                    // Test data retrieval
                    const apiData = migratedApiSettings.getData();
                    log('api-comparison-results', `üìã API data structure: ${apiData ? 'Valid object' : 'No data'}`);
                    if (apiData) {
                        const services = Object.keys(apiData);
                        log('api-comparison-results', `üìã Configured services: ${services.join(', ')}`);
                    }
                    
                } else {
                    log('api-comparison-results', '‚è≥ Migrated API settings not ready yet');
                }
                
                // Test original component basic functionality
                log('api-comparison-results', '\\nüìä Original Component Check:');
                log('api-comparison-results', `Original component loaded: ${originalApiSettings ? 'YES' : 'NO'}`);
                if (originalApiSettings._apiKeys) {
                    const originalKeys = Object.keys(originalApiSettings._apiKeys);
                    log('api-comparison-results', `Original has API keys: ${originalKeys.length > 0 ? 'YES' : 'NO'}`);
                }
                
            } catch (error) {
                log('api-comparison-results', `‚ùå Functionality test error: ${error.message}`);
            }
            
            log('api-comparison-results', '\\nüéâ API settings migration comparison complete!');
        }

        function clearApiSettingsTest() {
            const originalContainer = document.getElementById('original-api-container');
            const migratedContainer = document.getElementById('migrated-api-container');
            
            originalContainer.innerHTML = '<p style="color: #666; text-align: center;">Original API settings will appear here</p>';
            migratedContainer.innerHTML = '<p style="color: #666; text-align: center;">Migrated API settings will appear here</p>';
            
            originalApiSettings = null;
            migratedApiSettings = null;
            
            log('api-comparison-results', 'üßπ API settings test cleared');
        }

        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status status-${type}`;
        }

        function log(elementId, message) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            element.textContent += `[${timestamp}] ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }
    </script>
</body>
</html>